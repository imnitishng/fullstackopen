(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),l=t(4),u=t(2),i=t(3),m=t.n(i),s=function(e){var n=e.searchTerm,t=e.handleSearch;return r.a.createElement("p",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},f=function(e){var n=e.newNumber,t=e.newName,a=e.handleChange,o=e.handleNumberChange,c=e.addEntry;return r.a.createElement("form",{onSubmit:c},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:n,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.person,t=e.deleteEntry;return r.a.createElement(r.a.Fragment,null,n.name," ",n.number,r.a.createElement("button",{onClick:function(){return t(n.name,n.id)}}," delete "),r.a.createElement("br",null))},h=function(e){var n=e.personToShow,t=e.deleteEntry;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),n.map((function(e){return r.a.createElement(d,{key:e.name,person:e,deleteEntry:t})})))},p=(t(37),function(e){var n=e.message,t=e.alertType;return null===n?null:0===t?r.a.createElement("div",{className:"greenalert"},n):r.a.createElement("div",{className:"error"},n)}),b=function(e){return m.a.post("/api/persons",e)},v=function(e){var n="".concat("/api/persons","/").concat(e);return m.a.delete(n)},E=function(e){var n="".concat("/api/persons","/").concat(e.id);return m.a.put(n,e)},g=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),d=i[0],g=i[1],w=Object(a.useState)(""),j=Object(u.a)(w,2),O=j[0],y=j[1],S=Object(a.useState)(""),C=Object(u.a)(S,2),T=C[0],k=C[1],N=Object(a.useState)(null),D=Object(u.a)(N,2),F=D[0],I=D[1],J=Object(a.useState)(0),L=Object(u.a)(J,2),x=L[0],A=L[1],B=0===T.length?t:t.filter((function(e){if(e.name.toLowerCase().includes(T.toLowerCase()))return e}));return Object(a.useEffect)((function(){console.log("effect hook"),m.a.get("http://localhost:3001/api/persons").then((function(e){o(e.data)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{message:F,alertType:x}),r.a.createElement(s,{searchTerm:T,handleSearch:function(e){console.log(e.target.value),k(e.target.value)}}),r.a.createElement(f,{newNumber:O,newName:d,handleChange:function(e){console.log(e.target.value),g(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),y(e.target.value)},addEntry:function(e){var n=t.find((function(e){return e.name===d}));if(void 0!==n){if(e.preventDefault(),window.confirm("".concat(d," is already added to the phonebook, replace old with new?"))){var a=Object(l.a)(Object(l.a)({},n),{},{number:O});console.log(a),E(a).then((function(e){console.log(e),o(t.filter((function(e){return e.name!==n.name})).concat(a)),g(""),y(""),A(0),I("Updated ".concat(a.name)),setTimeout((function(){I(null)}),5e3)})).catch((function(e){A(1),I("Information of ".concat(a.name," has already been removed from the server.")),setTimeout((function(){I(null)}),5e3),o(t.filter((function(e){return e.id!==a.id})))}))}}else{e.preventDefault();var r={name:d,number:O};b(r).then((function(e){g(""),y(""),o(t.concat(r)),A(0),I("Added ".concat(r.name)),setTimeout((function(){I(null)}),5e3)})).catch((function(e){g(""),y(""),console.log(e.response.data),A(1),I(e.response.data.error),setTimeout((function(){I(null)}),5e3)}))}}}),r.a.createElement(h,{personToShow:B,deleteEntry:function(e,n){window.confirm("Delete ".concat(e,"?"))&&v(n).then((function(e){console.log(t),g(""),y(""),o(t.filter((function(e){return e.id!==n})))}))}}))};c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.651c6fd6.chunk.js.map